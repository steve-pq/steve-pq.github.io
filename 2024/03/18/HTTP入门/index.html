<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>HTTP入门 | paxの庭院</title><meta name="author" content="pax"><meta name="copyright" content="pax"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="HTTP入门资源和URI引入：HTTP 请求的内容通称为“资源”。”资源”这一概念非常宽泛，它可以是一份文档，一张图片，或所有其他你能够想到的格式。每个资源都由一个 （URI） 来进行标识。 URIURL(统一资源定位符)(Uniform Resource Locator) URL又被称为Web地址，语法如下： http://www.example.com:port/path/to/file/?k">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP入门">
<meta property="og:url" content="http://example.com/2024/03/18/HTTP%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="paxの庭院">
<meta property="og:description" content="HTTP入门资源和URI引入：HTTP 请求的内容通称为“资源”。”资源”这一概念非常宽泛，它可以是一份文档，一张图片，或所有其他你能够想到的格式。每个资源都由一个 （URI） 来进行标识。 URIURL(统一资源定位符)(Uniform Resource Locator) URL又被称为Web地址，语法如下： http://www.example.com:port/path/to/file/?k">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/q2.png">
<meta property="article:published_time" content="2024-03-18T15:00:37.000Z">
<meta property="article:modified_time" content="2024-06-18T00:34:39.345Z">
<meta property="article:author" content="pax">
<meta property="article:tag" content="入门">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/q2.png"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="http://example.com/2024/03/18/HTTP%E5%85%A5%E9%97%A8/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css?v=4.14.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = true
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'HTTP入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-18 08:34:39'
}</script><link rel="stylesheet" href="/css/xxx.css"><link rel="stylesheet" href="/css/cursor.css"><link rel="stylesheet" href="/css/loadin.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/mainColor/heoMainColor.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/poem.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/CodeByZach/pace/themes/green/pace-theme-flash.css"><meta name="generator" content="Hexo 7.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="scarecrow"><div class="scarecrow__hat"><div class="scarecrow__ribbon"></div></div><div class="scarecrow__head"><div class="scarecrow__eye"></div><div class="scarecrow__eye"></div><div class="scarecrow__mouth"></div><div class="scarecrow__pipe"></div></div><div class="scarecrow__body"><div class="scarecrow__glove scarecrow__glove--l"></div><div class="scarecrow__sleeve scarecrow__sleeve--l"></div><div class="scarecrow__bow"></div><div class="scarecrow__shirt"></div><div class="scarecrow__coat"></div><div class="scarecrow__waistcoat"></div><div class="scarecrow__sleeve scarecrow__sleeve--r"></div><div class="scarecrow__glove scarecrow__glove--r"></div><div class="scarecrow__coattails"></div><div class="scarecrow__pants"></div></div><div class="scarecrow__arms"></div><div class="scarecrow__leg">  </div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    btf.addGlobalFn('pjaxSend', () => { preloader.initLoading() }, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', () => { preloader.endLoading() }, 'preloader_end')
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" data-original="/img/77.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/poem/"><i class="fa-fw fas fa-poem"></i><span> 诗壁</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 中庭</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友座</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 溯流</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清欢</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 天籁</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 光影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 自我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/q2.png')"><nav id="nav"><span id="blog-info"><a href="/" title="paxの庭院"><span class="site-name">paxの庭院</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/poem/"><i class="fa-fw fas fa-poem"></i><span> 诗壁</span></a></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 中庭</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友座</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 溯流</span></a></li></ul></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 清欢</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 天籁</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 光影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 自我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">HTTP入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-03-18T15:00:37.000Z" title="发表于 2024-03-18 23:00:37">2024-03-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-06-18T00:34:39.345Z" title="更新于 2024-06-18 08:34:39">2024-06-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/HTTP/">HTTP</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="HTTP入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><div class="top-img" style="background-image: url('/img/q2.png');"></div><article class="post-content" id="article-container"><h1 id="HTTP入门"><a href="#HTTP入门" class="headerlink" title="HTTP入门"></a>HTTP入门</h1><h2 id="资源和URI"><a href="#资源和URI" class="headerlink" title="资源和URI"></a>资源和URI</h2><p>引入：HTTP 请求的内容通称为“资源”。”资源”这一概念非常宽泛，它可以是一份文档，一张图片，或所有其他你能够想到的格式。每个资源都由一个 （<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/URI">URI）</a> 来进行标识。</p>
<h3 id="URI"><a href="#URI" class="headerlink" title="URI"></a>URI</h3><p>URL(统一资源定位符)(Uniform Resource Locator)</p>
<p>URL又被称为Web地址，语法如下：</p>
<p><a href="http://www.example.com:port/path/to/file/?key1=1&amp;key2=2#somewhere">http://www.example.com:port/path/to/file/?key1=1&amp;key2=2#somewhere</a></p>
<p>解析：</p>
<h4 id="1-protocol-方案或协议"><a href="#1-protocol-方案或协议" class="headerlink" title="1.protocol(方案或协议)"></a>1.protocol(方案或协议)</h4><p>常见的有http，https，具体如下表：</p>
<table>
<thead>
<tr>
<th align="left">方案</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">数据</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URLs">数据 URI</a></td>
</tr>
<tr>
<td align="left">文件</td>
<td align="left">指定主机上文件的名称</td>
</tr>
<tr>
<td align="left">FTP协议</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/FTP">文件传输协议</a></td>
</tr>
<tr>
<td align="left">HTTP/HTTPS协议</td>
<td align="left"><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP">超文本传输 协议／安全的超文本传输协议</a></td>
</tr>
<tr>
<td align="left">mail至</td>
<td align="left">电子邮件地址</td>
</tr>
<tr>
<td align="left">SSH的</td>
<td align="left">安全 shell</td>
</tr>
<tr>
<td align="left">电话</td>
<td align="left">电话</td>
</tr>
<tr>
<td align="left">瓮</td>
<td align="left">统一资源名称</td>
</tr>
<tr>
<td align="left">查看源代码</td>
<td align="left">资源的源代码</td>
</tr>
<tr>
<td align="left">WS/WSS</td>
<td align="left">（加密的）<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API">WebSocket （en-US）</a> 连接</td>
</tr>
</tbody></table>
<h4 id="2-主机"><a href="#2-主机" class="headerlink" title="2.主机"></a>2.主机</h4><p>Domain Name(域名)：<a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a></p>
<blockquote>
<p><code>www.example.com</code>既是一个域名，也代表管理该域名的机构。它指示了需要向网络上的哪一台主机发起请求。当然，也可以直接向主机的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/IP_Address">IP address</a> 地址发起请求。但直接使用 IP 地址的场景并不常见。</p>
</blockquote>
<h4 id="3-端口-port"><a href="#3-端口-port" class="headerlink" title="3.端口(port)"></a>3.端口(port)</h4><blockquote>
<p>port表示用于访问 Web 服务器上资源的技术“门”。如果访问的该 Web 服务器使用 HTTP 协议的标准端口（HTTP 为 80，HTTPS 为 443）授予对其资源的访问权限，则通常省略此部分。否则端口就是 URI 必须的部分。</p>
</blockquote>
<h4 id="4-路径-path"><a href="#4-路径-path" class="headerlink" title="4.路径(path)"></a>4.路径(path)</h4><p>/pah/to/file</p>
<blockquote>
<p><code>/path/to/myfile.html</code>是 Web 服务器上资源的路径。在 Web 的早期，类似这样的路径表示 Web 服务器上的物理文件位置。现在，它主要是由没有任何物理实体的 Web 服务器抽象处理而成的。</p>
</blockquote>
<h4 id="5-查询-参数"><a href="#5-查询-参数" class="headerlink" title="5.查询(参数)"></a>5.查询(参数)</h4><p>?key1=1&amp;key2=2</p>
<blockquote>
<p><code>?key1=value1&amp;key2=value2</code>是提供给 Web 服务器的额外参数。这些参数是用 &amp; 符号分隔的键/值对列表。Web 服务器可以在将资源返回给用户之前使用这些参数来执行额外的操作。每个 Web 服务器都有自己的参数规则，想知道特定 Web 服务器如何处理参数的唯一可靠方法是询问该 Web 服务器所有者。</p>
</blockquote>
<h4 id="6-片段"><a href="#6-片段" class="headerlink" title="6.片段"></a>6.片段</h4><p>#somewhere</p>
<blockquote>
<p>是资源本身的某一部分的一个锚点。锚点代表资源内的一种”书签”，它给予浏览器显示位于该”加书签”点的内容的指示。例如，在 HTML 文档上，浏览器将滚动到定义锚点的那个点上；在视频或音频文档上，浏览器将转到锚点代表的那个时间。值得注意的是 # 号后面的部分，也称为片段标识符，永远不会与请求一起发送到服务器。</p>
</blockquote>
<p>举几个例子：</p>
<pre><code class="highlight plaintext">https://developer.mozilla.org/zh-CN/docs/Learn
tel:+1-816-555-1212
git@github.com:mdn/browser-compat-data.git
ftp://example.org/resource.txt
urn:isbn:9780141036144</code></pre>

<h3 id="URN"><a href="#URN" class="headerlink" title="URN"></a>URN</h3><p>URN全称为Uniform Resource Name(统一资源名称)，URN 是另一种形式的 URI，它通过特定命名空间中的唯一名称来标识资源。</p>
<pre><code class="highlight plaintext">urn:isbn:9780141036144
urn:ietf:rfc:7230</code></pre>

<p>上面两个 URN 标识了下面的资源：</p>
<ul>
<li>乔治·奥威尔所著的《1984》</li>
<li>IETF 规范 7230，超文本传输 协议 (HTTP/1.1)：Message Syntax and Routing.</li>
</ul>
<h3 id="Data-URL"><a href="#Data-URL" class="headerlink" title="Data URL"></a>Data URL</h3><h4 id="Ⅰ-简介"><a href="#Ⅰ-简介" class="headerlink" title="Ⅰ. 简介"></a>Ⅰ. 简介</h4><blockquote>
<p><strong>Data URL</strong>，即前缀为 <code>data:</code> 协议的 URL，其允许内容创建者向文档中嵌入小文件。它们之前被称作“data URI”，直到这个名字被 WHATWG 弃用。</p>
</blockquote>
<p>语法：data:[<mediatype>][;base64],<data></data></mediatype></p>
<p>Data URL 由四个部分组成：前缀（<code>data:</code>）、指示数据类型的 MIME 类型、如果非文本则为可选的 <code>base64</code> 标记、数据本身：</p>
<p>data:text/plain;base64,Hello World</p>
<h4 id="Ⅱ-对数据base64编码"><a href="#Ⅱ-对数据base64编码" class="headerlink" title="Ⅱ.对数据base64编码"></a>Ⅱ.对数据base64编码</h4><p>简介</p>
<blockquote>
<p>Base64 是一组二进制到文本的编码方案，通过将其转换为 radix-64 表示形式，以 ASCII 字符串格式表示二进制数据。通过仅由 ASCII 字符组成，base64 字符串通常是 url 安全的，这就是为什么它们可用于在 Data URL 中编码数据。</p>
</blockquote>
<p>作用：</p>
<blockquote>
<p>Base64 编码方案通常用于需要对二进制数据进行编码的情况，这些数据需要通过设计用于处理 ASCII 的媒体进行存储和传输。这样是为了保证数据的完整并且不用在传输过程中修改这些数据。Base64 也被一些应用（包括使用 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%A4%9A%E7%94%A8%E9%80%94%E4%BA%92%E8%81%AF%E7%B6%B2%E9%83%B5%E4%BB%B6%E6%93%B4%E5%B1%95">MIME</a> 的电子邮件）和在 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/XML">XML</a> 中储存复杂数据时使用。</p>
</blockquote>
<p>简单来说，信息从二进制方式变成文本方式</p>
<blockquote>
<p>Base64 编码在网络上的一个常见应用是对二进制数据进行编码，以便将其纳入 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URLs">data: URL</a> 中。</p>
</blockquote>
<p>附：Unicode： Unicode 是一个字符集，为世界上几乎所有的字符提供了唯一的标识符（Code Point）。</p>
<p>​	UTF-8：UTF-8（Unicode Transformation Format - 8-bit）是一种编码方案，用于在计算机系统中以字节的形式表示 Unicode 中的字符。</p>
<p>关系：<br>Unicode 和 UTF-8 是两个相关但不同的概念，它们在字符编码领域有着密切的关系。</p>
<ol>
<li><strong>Unicode：</strong><ul>
<li><strong>定义：</strong> Unicode 是一个字符集，为世界上几乎所有的字符提供了唯一的标识符（Code Point）。</li>
<li><strong>特点：</strong> Unicode 提供了一个标准化的方式来表示和处理不同语言和符号的字符，以实现统一的字符编码方案。</li>
<li><strong>表示方式：</strong> Unicode 中的每个字符都有一个唯一的编号，称为 Code Point，通常用 U+XXXX 的形式表示，其中 “XXXX” 是十六进制的数字。</li>
</ul>
</li>
<li><strong>UTF-8：</strong><ul>
<li><strong>定义：</strong> UTF-8（Unicode Transformation Format - 8-bit）是一种编码方案，用于在计算机系统中以字节的形式表示 Unicode 中的字符。</li>
<li><strong>特点：</strong> UTF-8 是一种可变长度的编码方案，能够表示 Unicode 中的所有字符，但对于 ASCII 字符，它只需要一个字节，这使得它在存储和传输时更为高效。</li>
<li><strong>编码规则：</strong> UTF-8 的编码规则是根据字符的 Unicode Code Point 来确定不同长度的字节序列。</li>
</ul>
</li>
</ol>
<p><strong>关系：</strong></p>
<ul>
<li>Unicode 定义了字符集和每个字符的唯一标识（Code Point）。</li>
<li>UTF-8 是 Unicode 的一种实现方式，是一种将 Unicode 字符编码为字节序列的方法，可以在计算机系统中存储和传输文本数据。</li>
</ul>
<h3 id="MIME-类型（IANA-媒体类型）"><a href="#MIME-类型（IANA-媒体类型）" class="headerlink" title="MIME 类型（IANA 媒体类型）"></a>MIME 类型（IANA 媒体类型）</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><blockquote>
<p><strong>媒体类型</strong>（也通常称为<strong>多用途互联网邮件扩展</strong>或 <strong>MIME</strong> 类型）是一种标准，用来表示文档、文件或一组数据的性质和格式。它在 IETF 的 <a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc6838">RFC 6838</a> 中进行了定义和标准化。</p>
</blockquote>
<p>附：IANA：互联网号码分配局，负责跟踪所有官方 MIME 类型。</p>
<h4 id="MIME结构"><a href="#MIME结构" class="headerlink" title="MIME结构"></a>MIME结构</h4><p>1.MIME 类型通常仅包含两个部分：<em>类型</em>（type）和<em>子类型</em>（subtype），中间由斜杠 <code>/</code> 分割，中间没有空白字符：</p>
<p>结构：<code>type/subtype</code></p>
<ul>
<li><strong>类型(type)<strong>：表示数据的大致分类，如</strong>video</strong>或<strong>text</strong></li>
<li>**子类型(subtype)**：MIME 类型所代表的指定类型的确切数据类型。以 <code>text</code> 类型为例，它的子类型包括：<code>plain</code>（纯文本）、<code>html</code>（<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/HTML">HTML</a> 源代码）、<code>calender</code>（iCalendar/<code>.ics</code> 文件）。</li>
</ul>
<p>2.结构里允许参数</p>
<pre><code class="highlight plaintext">type/subtype;parameter=value</code></pre>

<blockquote>
<p>例如，对于主类型为 <code>text</code> 的任何 MIME 类型，可以添加可选的 <code>charset</code> 参数，以指定数据中的字符所使用的字符集。如果没有指定 <code>charset</code>，默认值为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/ASCII">ASCII</a>（<code>US-ASCII</code>），除非被<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/User_agent">用户代理的</a>设置覆盖。要指定 UTF-8 文本文件，则使用 MIME 类型 <code>text/plain;charset=UTF-8</code>。</p>
</blockquote>
<p>附：UTF-8完美兼容ASCII字符</p>
<p>3.MIME类型有两类：<strong>独立的</strong>（discrete）和<strong>多部分的</strong>（multipart）。</p>
<p>独立类型（IANA目前已注册的）</p>
<ul>
<li>application：不明确属于其他类型之一的任何二进制数据。</li>
<li>audio：音频或音乐数据。常见的示例如 <code>audio/mpeg</code>、<code>audio/vorbis</code>。</li>
<li>example：在演示如何使用 MIME 类型的示例中用作占位符的保留类型。也可以作为子类型。</li>
<li>font：字体/字型数据。常见的示例如 <code>font/woff</code>、<code>font/ttf</code> 和 <code>font/otf</code>。</li>
<li>image：图像或图形数据，常见的例子有 <code>image/jpeg</code>、<code>image/png</code> 和 <code>image/svg+xml</code>。</li>
<li>model：三维物体或场景的模型数据。示例包含 <code>model/3mf</code> 和 <code>model/vrml</code>。</li>
<li>text：纯文本数据，示例包含：<code>text/plain</code>、<code>text/csv</code> 和 <code>text/html</code>。</li>
<li>video：视频数据或文件，例如 MP4 电影（<code>video/mp4</code>）。</li>
</ul>
<p>多部分类型</p>
<blockquote>
<p><strong>多部分</strong>类型指的是一类可分成不同部分的文件，其各部分通常是不同的 MIME 类型；也可用于——尤其在电子邮件中——表示属于同一事务的多个独立文件。它们代表一个<strong>复合文档</strong>。</p>
</blockquote>
<p>有两种多部分类型(初学没有深入了解)：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_Types#message"><code>message</code></a></p>
<p>封装其他信息的信息。例如，这可以用来表示将转发信息作为其数据一部分的电子邮件，或将超大信息分块发送，就像发送多条信息一样。例如，<code>message/rfc822</code>（用于转发或回复信息的引用）和 <code>message/partial</code>（允许将大段信息自动拆分成小段，由收件人重新组装）是两个常见的例子。（<a target="_blank" rel="noopener" href="https://www.iana.org/assignments/media-types/media-types.xhtml#message">查看 IANA 上 message 类型的注册表</a>）</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_Types#multipart"><code>multipart</code></a></p>
<p>由多个组件组成的数据，这些组件可能各自具有不同的 MIME 类型。例如，<code>multipart/form-data</code>（用于使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/FormData"><code>FormData</code></a> API 生成的数据）和 <code>multipart/byteranges</code>（定义于 <a target="_blank" rel="noopener" href="https://datatracker.ietf.org/doc/html/rfc7233#section-5.4.1">RFC 7233, section 5.4.1</a>，当获取到的数据仅为部分内容时——如使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Range"><code>Range</code></a> 标头传输的内容——与返回的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP">HTTP</a> 响应 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/206"><code>206</code></a> “Partial Content”组合使用）。（<a target="_blank" rel="noopener" href="https://www.iana.org/assignments/media-types/media-types.xhtml#multipart">查看 IANA 上 multipart 类型的注册表</a>）</p>
</blockquote>
<h4 id="对Web开发者至关重要的MIME类型"><a href="#对Web开发者至关重要的MIME类型" class="headerlink" title="对Web开发者至关重要的MIME类型"></a>对Web开发者至关重要的MIME类型</h4><p><strong>application/octet-stream</strong></p>
<blockquote>
<p>这是二进制文件的默认值.。由于这意味着<em>未知的二进制文件</em>，浏览器一般不会自动执行或询问执行。</p>
</blockquote>
<p><strong>text/plain</strong></p>
<blockquote>
<p>这是文本文件的默认值。即使它其实意味着<em>未知的文本文件</em>，但浏览器认为是可以直接展示的。</p>
</blockquote>
<p>text/css</p>
<blockquote>
<p>在网页中要被解析为 CSS 的任何 CSS 文件<strong>必须</strong>指定 MIME 为 <code>text/css</code>。通常，如果服务器不识别 CSS 文件的 <code>.css</code> 后缀，则可能将它们以 MIME 为 <code>text/plain</code> 或 <code>application/octet-stream</code> 来发送给浏览器：在这种情况下，大多数浏览器不将其识别为 CSS 文件而直接忽略。</p>
</blockquote>
<p>text/html</p>
<blockquote>
<p>所有的 HTML 内容都应该使用这种类型。</p>
</blockquote>
<p>text/javascript</p>
<blockquote>
<p>JavaScript 内容应始终使用 MIME 类型 <code>text/javascript</code> 提供。其他 MIME 类型对 JavaScript 无效，使用除 <code>text/javascript</code> 以外的任何 MIME 类型都可能导致脚本无法加载或运行。另外，。对于 JavaScript 内容来说，<code>charset</code> 参数无效，在大多数情况下会导致脚本加载失败。</p>
</blockquote>
<p>以下是常用的图像类型，可在网页中<em>安全</em>使用：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#apng_animated_portable_network_graphics"><code>image/apng</code></a>：动画便携式网络图形（APNG）</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#avif_%E5%9B%BE%E5%83%8F"><code>image/avif</code></a>：AV1 图像文件格式（AVIF）</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#gif_graphics_interchange_format"><code>image/gif</code></a>：图形交换格式（GIF）</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#jpeg_joint_photographic_experts_group_image"><code>image/jpeg</code></a>：联合图像专家小组图片（JPEG）</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#png_portable_network_graphics"><code>image/png</code></a>：便携式网络图形（PNG）</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#svg_scalable_vector_graphics"><code>image/svg+xml</code></a>：可缩放矢量图形（SVG）</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats/Image_types#webp_%E5%9B%BE%E5%83%8F"><code>image/webp</code></a>：Web 图像格式（WEBP）</li>
</ul>
<p><strong>multipart/form-data</strong></p>
<p>multipart/form-data可用于HTML表单发送信息给服务器</p>
<p>multipart/byteranges</p>
<p><code>multipart/byteranges</code> 用于把部分的响应报文发送回浏览器。</p>
<h4 id="正确设置MIME类型"><a href="#正确设置MIME类型" class="headerlink" title="正确设置MIME类型"></a>正确设置MIME类型</h4><blockquote>
<p>很多 web 服务器使用默认的 <code>application/octet-stream</code> 来发送未知类型。出于一些安全原因，对于这些资源浏览器不允许设置一些自定义默认操作，强制用户必须存储到本地以使用。</p>
</blockquote>
<p>常见的导致服务器配置错误的文件类型如下所示：</p>
<ul>
<li>RAR 压缩文件。在这种情况，理想状态是，设置真实的编码文件类型；但这通常不可能，因为 .RAR 文件可能包含多种不同类型的资源。这种情况，将所发送文件的 MIME 类型配置为 <code>application/x-rar-compressed</code>。</li>
<li>音频或视频文件。只有正确设置了 MIME 类型的文件才能被 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/video">``</a> 或<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/audio">``</a> 元素识别和播放。请确保指定了正确的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Media/Formats">音频和视频的媒体类型</a>。</li>
<li>专有文件类型。避免使用 <code>application/octet-stream</code>，对于这种一般的 MIME 类型浏览器不允许定义默认行为（比如“在 Word 中打开”）。像 <code>application/vnd.mspowerpoint</code> 这样的类型可以让用户选择自动在幻灯片软件中打开这样的文件。</li>
</ul>
<h4 id="MIME嗅探"><a href="#MIME嗅探" class="headerlink" title="MIME嗅探"></a>MIME嗅探</h4><blockquote>
<p>在缺失 MIME 类型或客户端认为文件设置了错误的 MIME 类型时，浏览器可能会通过查看资源来进行 <em>MIME 嗅探</em>。</p>
</blockquote>
<p>简单来说即是通过其他方法得知数据类型。</p>
<blockquote>
<p>由于某些 MIME 类型可能代表可执行内容，会存在一些安全问题。服务器可以通过发送 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Content-Type-Options"><code>X-Content-Type-Options</code></a> 标头来阻止 MIME 嗅探。</p>
</blockquote>
<p>可知MIME嗅探并非是一件好事，比如xss攻击等等，一些安全专业人士主张禁用或限制 MIME 嗅探，并强调在服务器端正确设置 “Content-Type” 标头以提供准确的文件类型信息。此外，使用 <code>X-Content-Type-Options</code> 头来控制浏览器是否进行 MIME 嗅探也是一种辅助措施。</p>
<h4 id="其他传送文件类型的方法"><a href="#其他传送文件类型的方法" class="headerlink" title="其他传送文件类型的方法"></a>其他传送文件类型的方法</h4><blockquote>
<ul>
<li>有时会使用名称后缀，特别是在 Microsoft Windows 系统上。并非所有的操作系统都认为这些后缀是有意义的（特别是 Linux 和 Mac OS），并且像外部 MIME 类型一样，不能保证它们是正确的。</li>
<li>魔数（magic number）。不同类型的文件的语法通过查看结构来允许文件类型推断。例如，每个 GIF 文件以 <code>47 49 46 38 39</code> 十六进制值（<code>GIF89</code>）开头，每个 PNG 文件以 <code>89 50 4E 47</code>（<code>.PNG</code>）开头。并非所有类型的文件都有魔数，所以这也不是 100％ 可靠的方式。</li>
</ul>
</blockquote>
<h2 id="HTTP指南"><a href="#HTTP指南" class="headerlink" title="HTTP指南"></a>HTTP指南</h2><h3 id="HTTP概述"><a href="#HTTP概述" class="headerlink" title="HTTP概述"></a>HTTP概述</h3><blockquote>
<p><strong>HTTP</strong> 是一种用作获取诸如 HTML 文档这类资源的<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Protocol">协议</a>。它是 Web 上进行任何数据交换的基础，同时，也是一种客户端—服务器（client-server）协议</p>
</blockquote>
<p>客户端和服务器之间通过HTTP协议通过交换一个个独立的消息（而非数据流）进行通信。客户端发出的消息称为<strong>请求（request）</strong>，服务端接收的应答消息称为<strong>响应（response）</strong>。</p>
<h4 id="基于HTTP的组件系统"><a href="#基于HTTP的组件系统" class="headerlink" title="基于HTTP的组件系统"></a>基于HTTP的组件系统</h4><p><img src="/img/avatar.png" data-original="/./../../../web%E5%AE%89%E5%85%A8/WEB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%9F%A5%E8%AF%86%E7%AF%87/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/client-server-chain-1706253428232-5.png" alt="客户端与服务器间的链条"></p>
<p>客户端(Client)：用户代理</p>
<blockquote>
<p><em>用户代理</em>是任何能够代表用户行为的工具。这类工具以浏览器为主，不过，它也可能是工程师和 Web 开发人员调试应用所使用的那些程序。</p>
</blockquote>
<p>一般情况下总是浏览器发起请求而非是服务端，不过后来加入了一些机制，能够模拟由服务端发出的消息。</p>
<p>Web服务端(Server)：</p>
<blockquote>
<p>在上述通信过程的另一侧是服务端，它<em>负责提供</em>客户端所请求的文档。一个服务端可以假装表现为仅有一台机器，但实际上，它可以是共享负载的一组服务器集群（负载均衡）或是其他类型的软件（如缓存、数据库服务、电商服务等），按需完整或部分地生成文档。</p>
</blockquote>
<p>此外，一个服务器可以不仅仅只有一台机器，而多个服务端软件实例也可部署在同一台机器上。</p>
<p>代理：</p>
<blockquote>
<p>在浏览器和服务器之间，有许多计算机和设备参与传递了 HTTP 消息。依靠 Web 技术栈的层次化的结构，传递过程中的多数操作都位于传输层、网络层或物理层，它们对于 HTTP 应用层而言就是透明的，并默默地对网络性能产生着重要影响。还有一部分实体在应用层参与消息传递，一般被称为<strong>代理</strong>（Proxy）。代理可以是透明的，即转发它们收到的请求并不做任何修改，也可以表现得不透明，将它传递给服务端之前使用一些手段修改这个请求。代理可以发挥很多种作用：</p>
</blockquote>
<blockquote>
<ul>
<li>缓存（可以是公开的也可以是私有的，如浏览器的缓存）</li>
<li>过滤（如反病毒扫描、家长控制…）</li>
<li>负载均衡（让多个服务器服务不同的请求）</li>
<li>认证（控制对不同资源的访问）</li>
<li>日志（使得代理可以存储历史信息）</li>
</ul>
</blockquote>
<h4 id="HTTP的基本性质"><a href="#HTTP的基本性质" class="headerlink" title="HTTP的基本性质"></a>HTTP的基本性质</h4><ul>
<li>HTTP是简约的</li>
<li>HTTP是可扩展的：HTTP标头（header）</li>
<li>HTTP无状态，但并非无回会话</li>
<li>HTTP和网络连接</li>
</ul>
<h4 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h4><blockquote>
<p>HTTP/1.1 以及更早的 HTTP 协议报文都是语义可读的。在 HTTP/2 中，这些报文被嵌入到了一个新的二进制结构，帧。帧允许实现很多优化，比如报文标头的压缩以及多路复用。即使只有原始 HTTP 报文的一部分以 HTTP/2 发送出来，每条报文的语义依旧不变，客户端会重组原始 HTTP/1.1 请求。因此用 HTTP/1.1 格式来理解 HTTP/2 报文仍旧有效。</p>
</blockquote>
<p>请求报文：<img src="/img/avatar.png" data-original="/./../../../web%E5%AE%89%E5%85%A8/WEB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%9F%A5%E8%AF%86%E7%AF%87/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/http_request.png" alt="一个基础的 HTTP 请求"></p>
<ol>
<li>一个HTTP方法，可以是GET，POST等等，以此定义客户端执行的操作</li>
<li>要获取的资源的路径</li>
<li>HTTP协议版本号</li>
<li>请求头，又称为HTTP标头</li>
<li>请求体</li>
</ol>
<p>响应报文：<img src="/img/avatar.png" data-original="/./../../../web%E5%AE%89%E5%85%A8/WEB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%9F%A5%E8%AF%86%E7%AF%87/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/http_response.png" alt="HTTP 响应的图片"></p>
<ol>
<li>HTTP协议版本号</li>
<li>一个状态码，指明操作是否成功以及原因</li>
<li>一个状态信息，这个信息是一个不权威、简短的状态码描述</li>
<li>响应头，与请求头相似</li>
<li>可选项，一个包含了被获取资源的主体</li>
</ol>
<p>附：API：API就像一家餐厅中的点餐窗口，提供了一个标准化的接口，使得应用程序能够与服务进行交互，请求执行特定的功能或获取数据。这种交互通过HTTP协议实现，就像服务员在点餐窗口和厨房之间传递顾客的需求和厨房的服务一样</p>
<p>附：HTTP/2与HTTP/1.1有几处基本的不同：</p>
<blockquote>
<ul>
<li>HTTP/2 是二进制协议而不是文本协议。不再可读，也不可无障碍的手动创建，改善的优化技术现在可被实施。</li>
<li>这是一个多路复用协议。并行的请求能在同一个链接中处理，移除了 HTTP/1.x 中顺序和阻塞的约束。</li>
<li>压缩了标头。因为标头在一系列请求中常常是相似的，其移除了重复和传输重复数据的成本。</li>
<li>其允许服务器在客户端缓存中填充数据，通过一个叫服务器推送的机制来提前请求。</li>
</ul>
</blockquote>
<h3 id="HTTP标头-header"><a href="#HTTP标头-header" class="headerlink" title="HTTP标头(header)"></a>HTTP标头(header)</h3><p>推荐：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903745004765198">https://juejin.cn/post/6844903745004765198</a></p>
<h4 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h4><h5 id="分类："><a href="#分类：" class="headerlink" title="分类："></a>分类：</h5><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/General_header">通用标头（General header）</a>，例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Via"><code>Via</code></a>，适用于整个消息。</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Request_header">请求标头（Request header）</a>，例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/User-Agent"><code>User-Agent</code></a>、<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Type"><code>Accept-Type</code></a>，通过进一步的定义（例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code></a>）、给定上下文（例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referer"><code>Referer</code></a>）或者进行有条件的限制（例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/If-None"><code>If-None</code></a>）来修改请求。</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Representation_header">表示标头（Representation header）</a>，例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a> 描述了消息数据的原始格式和应用的任意编码（仅在消息有主体时才存在）。</li>
</ul>
</blockquote>
<h5 id="常用请求头："><a href="#常用请求头：" class="headerlink" title="常用请求头："></a>常用请求头：</h5><h6 id="1-Accept"><a href="#1-Accept" class="headerlink" title="1.Accept"></a>1.Accept</h6><p>Accept: type/subtype，浏览器可以接受服务器发来的数据类型</p>
<h6 id="2-Accept-Encoding"><a href="#2-Accept-Encoding" class="headerlink" title="2.Accept-Encoding"></a>2.Accept-Encoding</h6><blockquote>
<p>浏览器申明自己接收的编码方法，通常指定压缩方法，是否支持压缩，支持什么压缩方法（注意：这不是只字符编码）。</p>
</blockquote>
<h6 id="3-Accept-Language"><a href="#3-Accept-Language" class="headerlink" title="3.Accept-Language"></a>3.Accept-Language</h6><p>浏览器申明自己接受的语言 </p>
<h6 id="4-Connecction"><a href="#4-Connecction" class="headerlink" title="4.Connecction"></a>4.Connecction</h6><ul>
<li><strong>Connection: keep-alive</strong> ：建立稳定的TCP链接，客户端下次访问此处时会继续使用该链接</li>
<li><strong>Connection: close</strong> ：当前Request完成后，客户端和服务器之间用于传输HTTP数据的TCP连接会关闭， 当客户端再次发送Request，需要重新建立TCP连接。</li>
</ul>
<h6 id="5-Host-必须的"><a href="#5-Host-必须的" class="headerlink" title="5.Host(必须的)"></a>5.Host(必须的)</h6><p>目标主机和端口号，通常在URL里提取</p>
<h6 id="6-Referer"><a href="#6-Referer" class="headerlink" title="6.Referer"></a>6.Referer</h6><p>告诉服务器我从哪个页面来</p>
<h6 id="7-User-Agent"><a href="#7-User-Agent" class="headerlink" title="7.User-Agent"></a>7.User-Agent</h6><p>告诉HTTP服务器， 客户端使用的操作系统和浏览器的名称和版本</p>
<h6 id="8-Cache-Control"><a href="#8-Cache-Control" class="headerlink" title="8.Cache-Control"></a>8.Cache-Control</h6><p>值：</p>
<ul>
<li>private：默认值，应只能够作为私有的缓存，不能在用户间共享</li>
<li>public：响应会被缓存，并且在多用户间共享。</li>
<li>must-revalidate：响应在特定条件下会被重用，以满足接下来的请求，但是它必须到服务器端去验证它是不是仍然是最新的</li>
<li>no-cache：响应不会被缓存,而是实时向服务器端请求资源</li>
<li>max-age=num：设置缓存最大的有效时间，但是这个参数定义的是时间大小（比如：60）而不是确定的时间点。单位是[秒 seconds]。</li>
<li>no-store：任何条件下，响应都不会被缓存，并且不会被写入到客户端的磁盘里，这也是基于安全考虑的某些敏感的响应才会使用这个。</li>
</ul>
<h6 id="9-Cookie"><a href="#9-Cookie" class="headerlink" title="9.Cookie"></a>9.Cookie</h6><p>Cookie是用来存储一些用户信息以便让服务器辨别用户身份</p>
<h6 id="10-Range（用于断点续传）"><a href="#10-Range（用于断点续传）" class="headerlink" title="10.Range（用于断点续传）"></a>10.Range（用于断点续传）</h6><p>Range:bytes=0-5：指定第一个字节的位置和最后一个字节的位置。用于告诉服务器自己想取对象的哪部分。</p>
<h6 id="11-X-Forwarded-For"><a href="#11-X-Forwarded-For" class="headerlink" title="11.X-Forwarded-For"></a>11.X-Forwarded-For</h6><p>该标头用来表示 HTTP 请求端真实 IP，可伪造</p>
<h5 id="概览"><a href="#概览" class="headerlink" title="概览"></a>概览</h5><ul>
<li><p>Accept：指定客户端能够接收的内容类型。</p>
</li>
<li><p>Accept-Charset：浏览器可以接受的字符编码集。</p>
</li>
<li><p>Accept-Encoding：指定浏览器可以支持的web服务器返回内容压缩编码类型。</p>
</li>
<li><p>Accept-Language：浏览器可接受的语言。</p>
</li>
<li><p>Accept-Ranges：可以请求网页实体的一个或者多个子范围字段。</p>
</li>
<li><p>AuthorizationHTTP：授权的授权证书。</p>
</li>
<li><p>Cache-Control：指定请求和响应遵循的缓存机制。</p>
</li>
<li><p>Connection：表示是否需要持久连接。（HTTP 1.1默认进行持久连接）</p>
</li>
<li><p>CookieHTTP：请求发送时，会把保存在该请求域名下的所有cookie值一起发送给web服务器。</p>
</li>
<li><p>Content-Length：请求的内容长度。</p>
</li>
<li><p>Content-Type：请求的与实体对应的MIME信息。</p>
</li>
<li><p>Date：请求发送的日期和时间。</p>
</li>
<li><p>Expect：请求的特定的服务器行为。</p>
</li>
<li><p>From：发出请求的用户的Email。</p>
</li>
<li><p>Host：指定请求的服务器的域名和端口号。</p>
</li>
<li><p>If-Match：只有请求内容与实体相匹配才有效。</p>
</li>
<li><p>If-Modified-Since：如果请求的部分在指定时间之后被修改则请求成功，未被修改则返回304代码。</p>
</li>
<li><p>If-None-Match：如果内容未改变返回304代码，参数为服务器先前发送的Etag，与服务器回应的Etag比较判断是否改变。</p>
</li>
<li><p>If-Range：如果实体未改变，服务器发送客户端丢失的部分，否则发送整个实体。</p>
</li>
<li><p>If-Unmodified-Since：只在实体在指定时间之后未被修改才请求成功。</p>
</li>
<li><p>Max-Forwards：限制信息通过代理和网关传送的时间。</p>
</li>
<li><p>Pragma：用来包含实现特定的指令。</p>
</li>
<li><p>Proxy-Authorization：连接到代理的授权证书。</p>
</li>
<li><p>Range：只请求实体的一部分，指定范围。</p>
</li>
<li><p>Referer：先前网页的地址，当前请求网页紧随其后,即来路。</p>
</li>
<li><p>TE：客户端愿意接受的传输编码，并通知服务器接受接受尾加头信息。</p>
</li>
<li><p>Upgrade：向服务器指定某种传输协议以便服务器进行转换（如果支持。</p>
</li>
<li><p>User-AgentUser-Agent：的内容包含发出请求的用户信息。</p>
</li>
<li><p>Via：通知中间网关或代理服务器地址，通信协议。</p>
</li>
<li><p>Warning：关于消息实体的警告信息</p>
</li>
</ul>
<h4 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h4><h5 id="分类：-1"><a href="#分类：-1" class="headerlink" title="分类："></a>分类：</h5><blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/General_header">通用标头（General header）</a>，例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Via"><code>Via</code></a>，适用于整个消息。</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Response_header">响应标头（Response header）</a>，例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Vary"><code>Vary</code></a> 和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Ranges"><code>Accept-Ranges</code></a>，提供有关服务器的其他信息，这些信息不适合状态行。</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/Representation_header">表示标头（Representation header）</a>，例如 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a> 描述了消息数据的原始格式和应用的任意编码（仅在消息有主体时才存在）</li>
</ul>
</blockquote>
<h5 id="常见响应头："><a href="#常见响应头：" class="headerlink" title="常见响应头："></a>常见响应头：</h5><h6 id="1-Cache-Control"><a href="#1-Cache-Control" class="headerlink" title="1.Cache-Control"></a>1.Cache-Control</h6><p>（对应请求中的Cache-Control）</p>
<h6 id="2-Content-Type"><a href="#2-Content-Type" class="headerlink" title="2..Content-Type"></a>2..<strong>Content-Type</strong></h6><p>告诉客户端资源文件的类型以及相应的<strong>字符</strong>编码方式。（注意，这里是字符编码而不是传输编码）</p>
<h6 id="3-Content-Encoding"><a href="#3-Content-Encoding" class="headerlink" title="3.Content-Encoding"></a>3.Content-Encoding</h6><p>告诉客户端二进制资源通过什么方式(比如gzip)对二进制资源实体进行压缩。</p>
<p>附：gzip 是一种压缩算法，用于将二进制数据流（包括文本和其他数据类型）进行压缩。gzip 并不是将文本编码成二进制数据流，而是对已有的二进制数据进行压缩，以减小数据的体积。</p>
<h6 id="4-Date"><a href="#4-Date" class="headerlink" title="4.Date"></a>4.Date</h6><blockquote>
<p><strong>Date: Tue, 03 Apr 2018 03:52:28 GMT</strong> 这个是服务端发送资源时的服务器时间，GMT是格林尼治所在地的标准时间。http协议中发送的时间都是GMT的，这主要是解决在互联网上，不同时区在相互请求资源的时候，时间混乱问题。</p>
</blockquote>
<h6 id="5-Server"><a href="#5-Server" class="headerlink" title="5.Server"></a>5.Server</h6><p>表明服务器类型和对应的版本</p>
<h6 id="6-Transfer-Encoding"><a href="#6-Transfer-Encoding" class="headerlink" title="6.Transfer-Encoding"></a>6.Transfer-Encoding</h6><blockquote>
<p><strong>Transfer-Encoding：chunked</strong> 这个响应头告诉客户端，服务器发送的资源的方式是分块发送的。一般分块发送的资源都是服务器动态生成的，在发送时还不知道发送资源的大小，所以采用分块发送，每一块都是独立的，独立的块都能标示自己的长度，最后一块是0长度的，当客户端读到这个0长度的块时，就可以确定资源已经传输完了。</p>
</blockquote>
<h6 id="7-Expires"><a href="#7-Expires" class="headerlink" title="7.Expires"></a>7.Expires</h6><blockquote>
<p><strong>Expires:Sun, 1 Jan 2000 01:00:00 GMT</strong> 这个响应头也是跟缓存有关的，告诉客户端在这个时间前，可以直接访问缓存副本，很显然这个值会存在问题，因为客户端和服务器的时间不一定会都是相同的，如果时间不同就会导致问题。所以这个响应头是没有Cache-Control：max-age=*这个响应头准确的，因为max-age=date中的date是个相对时间，不仅更好理解，也更准确。</p>
</blockquote>
<h6 id="8-Last-Modified"><a href="#8-Last-Modified" class="headerlink" title="8.Last-Modified"></a>8.Last-Modified</h6><blockquote>
<p><strong>Last-Modified: Dec, 26 Dec 2015 17:30:00 GMT</strong> 所请求的对象的最后修改日期(按照 RFC 7231 中定义的“超文本传输协议日期”格式来表示)</p>
</blockquote>
<h6 id="9-Connection"><a href="#9-Connection" class="headerlink" title="9.Connection"></a>9.Connection</h6><p><strong>Connection：keep-alive</strong> 回应客户端的Connection：keep-alive，告诉客户端服务器的tcp连接也是一个长连接，客户端可以继续使用这个tcp连接发送http请求。</p>
<h6 id="10-Etag"><a href="#10-Etag" class="headerlink" title="10.Etag"></a>10.Etag</h6><blockquote>
<p><strong>ETag: “737060cd8c284d8af7ad3082f209582d”</strong> 就是一个对象（比如URL）的标志值，就一个对象而言，比如一个html文件，如果被修改了，其Etag也会别修改，所以，ETag的作用跟Last-Modified的作用差不多，主要供WEB服务器判断一个对象是否改变了。比如前一次请求某个html文件时，获得了其 ETag，当这次又请求这个文件时，浏览器就会把先前获得ETag值发送给WEB服务器，然后WEB服务器会把这个ETag跟该文件的当前ETag进行对比，然后就知道这个文件有没有改变了。</p>
</blockquote>
<h6 id="11-Refresh"><a href="#11-Refresh" class="headerlink" title="11.Refresh"></a>11.Refresh</h6><blockquote>
<p><strong>Refresh: 5; url=<a target="_blank" rel="noopener" href="http://baidu.com/">http://baidu.com</a></strong> 用于重定向，或者当一个新的资源被创建时。默认会在5秒后刷新重定向。</p>
</blockquote>
<h6 id="12-Access-Control-Allow-Origin"><a href="#12-Access-Control-Allow-Origin" class="headerlink" title="12.Access-Control-Allow-Origin"></a>12.Access-Control-Allow-Origin</h6><blockquote>
<p><strong>Access-Control-Allow-Origin: *</strong>  <em>号代表所有网站可以跨域资源共享，如果当前字段为</em>那么Access-Control-Allow-Credentials就不能为true</p>
<p>Access-Control-Allow-Origin: <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> 指定哪些网站可以跨域资源共享</p>
</blockquote>
<h6 id="13-Access-Control-Allow-Methods"><a href="#13-Access-Control-Allow-Methods" class="headerlink" title="13.Access-Control-Allow-Methods"></a>13.Access-Control-Allow-Methods</h6><blockquote>
<p><strong>Access-Control-Allow-Methods：GET,POST,PUT,DELETE</strong> 允许哪些方法来访问</p>
</blockquote>
<h6 id="14-Access-Control-Allow-Credentials"><a href="#14-Access-Control-Allow-Credentials" class="headerlink" title="14.Access-Control-Allow-Credentials"></a>14.Access-Control-Allow-Credentials</h6><blockquote>
<p><strong>Access-Control-Allow-Credentials: true</strong> 是否允许发送cookie。默认情况下，Cookie不包括在CORS请求之中。设为true，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器。这个值也只能设为true，如果服务器不要浏览器发送Cookie，删除该字段即可。如果access-control-allow-origin为*，当前字段就不能为true</p>
</blockquote>
<h6 id="15-Content-Range"><a href="#15-Content-Range" class="headerlink" title="15.Content-Range"></a>15.Content-Range</h6><blockquote>
<p><strong>Content-Range: bytes 0-5/7877</strong> 指定整个实体中的一部分的插入位置，他也指示了整个实体的长度。在服务器向客户返回一个部分响应，它必须描述响应覆盖的范围和整个实体长度。</p>
</blockquote>
<h5 id="概览-1"><a href="#概览-1" class="headerlink" title="概览"></a>概览</h5><ul>
<li><p>Accept-Ranges：表明服务器是否支持指定范围请求及哪种类型的分段请求。</p>
</li>
<li><p>Age：从原始服务器到代理缓存形成的估算时间（以秒计，非负）。</p>
</li>
<li><p>Allow：对某网络资源的有效的请求行为，不允许则返回405。</p>
</li>
<li><p>Cache-Control：告诉所有的缓存机制是否可以缓存及哪种类型。</p>
</li>
<li><p>Content-Encodingweb：服务器支持的返回内容压缩编码类型。。</p>
</li>
<li><p>Content-Language：响应体的语言。</p>
</li>
<li><p>Content-Length：响应体的长度。</p>
</li>
<li><p>Content-Location：请求资源可替代的备用的另一地址。</p>
</li>
<li><p>Content-MD5：返回资源的MD5校验值。</p>
</li>
<li><p>Content-Range：在整个返回体中本部分的字节位置。</p>
</li>
<li><p>Content-Type：返回内容的MIME类型。</p>
</li>
<li><p>Date：原始服务器消息发出的时间。</p>
</li>
<li><p>ETag：请求变量的实体标签的当前值。</p>
</li>
<li><p>Expires：响应过期的日期和时间。</p>
</li>
<li><p>Last-Modified：请求资源的最后修改时间。</p>
</li>
<li><p>Location：用来重定向接收方到非请求URL的位置来完成请求或标识新的资源。</p>
</li>
<li><p>Pragma：包括实现特定的指令，它可应用到响应链上的任何接收方。</p>
</li>
<li><p>Proxy-Authenticate：它指出认证方案和可应用到代理的该URL上的参数。</p>
</li>
<li><p>refresh：应用于重定向或一个新的资源被创造，在5秒之后重定向（由网景提出，被大部分浏览器支持）</p>
</li>
<li><p>Retry-After：如果实体暂时不可取，通知客户端在指定时间之后再次尝试。</p>
</li>
<li><p>Serverweb：服务器软件名称。</p>
</li>
<li><p>Set-Cookie：设置Http Cookie。</p>
</li>
<li><p>Trailer：指出头域在分块传输编码的尾部存在。</p>
</li>
<li><p>Transfer-Encoding：文件传输编码。</p>
</li>
<li><p>Vary：告诉下游代理是使用缓存响应还是从原始服务器请求。</p>
</li>
<li><p>Via：告知代理客户端响应是通过哪里发送的。</p>
</li>
<li><p>Warning：警告实体可能存在的问题。</p>
</li>
<li><p>WWW-Authenticate：表明客户端请求实体应该使用的授权方案。</p>
</li>
</ul>
<h3 id="HTTP会话过程"><a href="#HTTP会话过程" class="headerlink" title="HTTP会话过程"></a>HTTP会话过程</h3><p>第一步：客户端建立一条 TCP 连接（如果传输层不是 TCP，也可以是其他适合的连接）。</p>
<p>第二步：客户端发送请求并等待应答。(Resquest)</p>
<p>第三步：服务器处理请求并送回应答，回应包括一个状态码和对应的数据。(Response)</p>
<p>从 HTTP/1.1 开始，连接在完成第三阶段后不再关闭，客户端可以再次发起新的请求。这意味着第二步和第三步可以连续进行数次。</p>
<h3 id="HTTP-1-x-的连接管理"><a href="#HTTP-1-x-的连接管理" class="headerlink" title="HTTP/1.x 的连接管理"></a>HTTP/1.x 的连接管理</h3><p>讨论四种方式：</p>
<h4 id="Ⅰ-短连接"><a href="#Ⅰ-短连接" class="headerlink" title="Ⅰ.短连接"></a>Ⅰ.短连接</h4><p>HTTP/1.0的默认方式，每次会话都要重新建立TCP连接</p>
<p>建立TCP 连接本身就是耗费时间的，可以保持更多的TCP热连接来适应负载。短连接破坏了 TCP 具备的能力，并且新的冷连接降低了其性能。</p>
<blockquote>
<p>这是 HTTP/1.0 的默认模型（如果没有指定 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Connection"><code>Connection</code></a> 协议头，或者是值被设置为 <code>close</code>）。而在 HTTP/1.1 中，只有当 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Connection"><code>Connection</code></a> 被设置为 <code>close</code> 时才会用到这个模型。</p>
</blockquote>
<h4 id="Ⅱ-长连接"><a href="#Ⅱ-长连接" class="headerlink" title="Ⅱ.长连接"></a>Ⅱ.长连接</h4><p>长连接又被称为<strong>keep-alive连接</strong></p>
<p>长连接会在空闲一段时间后自动关闭（服务器可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Keep-Alive"><code>Keep-Alive</code></a> 协议头来指定一个最小的连接保持时间）。</p>
<p>长连接缺点：长连接在空闲状态仍然会消耗服务器资源，而且在重负载时还有可能遭受 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/DOS_attack">DoS 攻击</a>。这种场景下可以使用非长连接，即尽快关闭那些空闲的连接，也能对性能有所提升。</p>
<p>注意：</p>
<blockquote>
<p>HTTP/1.0 里默认并不使用长连接。把 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Connection"><code>Connection</code></a> 设置成 <code>close</code> 以外的其他参数都可以让其保持长连接，通常会设置为 <code>retry-after</code>。</p>
<p>在 HTTP/1.1 里，默认就是长连接的，不再需要标头（但我们还是会把它加上，万一某个时候因为某种原因要退回到 HTTP/1.0 呢）。</p>
</blockquote>
<h4 id="Ⅲ-流水线"><a href="#Ⅲ-流水线" class="headerlink" title="Ⅲ.流水线"></a>Ⅲ.流水线</h4><p>流水线并发多个请求，在提高性能的同时对服务端的要求提高，并且也存在新的风险。</p>
<p>附：</p>
<blockquote>
<p> HTTP 流水线在现代浏览器中并不是默认被启用的：</p>
<ul>
<li>有缺陷的<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8">代理服务器</a>仍然很常见，这些会导致 Web 开发人员无法预见和轻松诊断的奇怪和不稳定行为。</li>
<li>正确的实现流水线是复杂的：传输中的资源大小、多少有效的 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E4%BE%86%E5%9B%9E%E9%80%9A%E8%A8%8A%E5%BB%B6%E9%81%B2">RTT</a> 会被用到以及有效带宽都会直接影响到流水线提供的改善。不知道这些的话，重要的消息可能被延迟到不重要的消息后面。这个重要性的概念甚至会演变为影响到页面布局！因此 HTTP 流水线在大多数情况下带来的改善并不明显。</li>
<li>流水线受制于<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E9%98%9F%E5%A4%B4%E9%98%BB%E5%A1%9E">队头阻塞（HOL）</a>问题。</li>
</ul>
<p> 由于这些原因，流水线已被 HTTP/2 中更好的算法——<em>多路复用</em>（multiplexing）所取代。</p>
</blockquote>
<h4 id="Ⅳ-域名分块"><a href="#Ⅳ-域名分块" class="headerlink" title="Ⅳ.域名分块"></a>Ⅳ.域名分块</h4><p>须知：</p>
<blockquote>
<p> 除非你有紧急而迫切的需求，不要使用这一过时的技术；而是升级到 HTTP/2。在 HTTP/2 里，做域名分片就没必要了：HTTP/2 的连接可以很好的处理并发的无优先级的请求。域名分片甚至会影响性能。大多数 HTTP/2 的实现还会使用一种称作<a target="_blank" rel="noopener" href="https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/">连接聚合</a>的技术去尝试合并被分片的域名。</p>
</blockquote>
<p>简单来说，创建多个通向主域名的附域名，每个域名又有多个连接。如下图：</p>
<p><img src="/img/avatar.png" data-original="/./../../../web%E5%AE%89%E5%85%A8/WEB%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%9F%A5%E8%AF%86%E7%AF%87/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/httpsharding.png" alt="Without domain sharding, a client requests six images from a domain with a maximum of two requests taking place in parallel. With domain sharding, the images are available from two domains and the client can run four requests in parallel, downloading the images in less time."></p>
<h3 id="HTTP协议升级"><a href="#HTTP协议升级" class="headerlink" title="HTTP协议升级"></a>HTTP协议升级</h3><p>简单解释：</p>
<ol>
<li>初始状态，较为低级</li>
<li>由客户端提出升级请求</li>
<li>协商升级（客户端发送一个请求头部包含 <code>Upgrade: websocket</code>，表示想要升级到 WebSocket 协议，服务端同意升级）</li>
<li>升级成功，切换到一个新的协议（如 WebSocket）</li>
</ol>
<h2 id="HTTP安全"><a href="#HTTP安全" class="headerlink" title="HTTP安全"></a>HTTP安全</h2><h3 id="内容安全策略-CSP"><a href="#内容安全策略-CSP" class="headerlink" title="内容安全策略(CSP)"></a><strong>内容安全策略(CSP)</strong></h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>Content-Security-Policy，是一个额外的安全层，用于检测并削弱一些特定的攻击，如XSS(跨站脚本攻击)，数据注入攻击等等。</p>
<p>为使 CSP 可用，需要配置网络服务器返回 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy"><code>Content-Security-Policy</code></a> HTTP 标头（X-Content-Security-Policy` 标头是旧版本的，无须再如此指定）。</p>
<p>除此之外，<meta>元素也可以被用来配置该策略，例如</p>
<pre><code class="highlight plaintext">&lt;meta
  http-equiv="Content-Security-Policy"
  content="default-src 'self'; img-src https://*; child-src 'none';" /&gt;</code></pre>

<h4 id="可缓解的威胁"><a href="#可缓解的威胁" class="headerlink" title="可缓解的威胁"></a>可缓解的威胁</h4><p>缓解跨站脚本攻击(XSS)</p>
<blockquote>
<p>CSP 的主要目标是减少和报告 XSS 攻击。XSS 攻击利用了浏览器对于从服务器所获取的内容的信任。恶意脚本在受害者的浏览器中得以运行，因为浏览器信任其内容来源，即使有的时候这些脚本并非来自于它本该来的地方。</p>
</blockquote>
<p>CSP制定了一个白名单域(制定白名单是一个好习惯)，一个CSP兼容的浏览器仅会执行从白名单域获取到的脚本文件，其余的忽略。</p>
<p>缓解数据包嗅探攻击</p>
<blockquote>
<p>除限制可以加载内容的域，服务器还可指明哪种协议允许使用；比如（从理想化的安全角度来说），服务器可指定所有内容必须通过 HTTPS 加载。一个完整的数据安全传输策略不仅强制使用 HTTPS 进行数据传输，也为所有的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies">cookie 标记 <code>secure</code> 标识</a>，并且提供自动的重定向使得 HTTP 页面导向 HTTPS 版本。网站也可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Strict-Transport-Security"><code>Strict-Transport-Security</code></a> HTTP 标头确保连接它的浏览器只使用加密通道。</p>
</blockquote>
<p>通过导向HTTPS进而避免数据包嗅探攻击。</p>
<h4 id="使用CSP"><a href="#使用CSP" class="headerlink" title="使用CSP"></a>使用CSP</h4><h5 id="制定策略："><a href="#制定策略：" class="headerlink" title="制定策略："></a>制定策略：</h5><p>使用 <strong>Content-Security-Policy</strong> HTTP 标头来指定策略，如下：</p>
<pre><code class="highlight plaintext">Content-Security-Policy: policy</code></pre>

<p>策略（policy）参数是一个包含了各种描述你的 CSP 策略指令的字符串。</p>
<h5 id="编写策略："><a href="#编写策略：" class="headerlink" title="编写策略："></a>编写策略：</h5><p>策略由一系列策略指令所组成，每个策略指令都描述了针对某个特定资源的类型以及策略生效的范围。策略应当包含一个<strong>default-src</strong>策略指令，在其他资源类型没有符合自己的策略时应用该策略。</p>
<h5 id="对策略进行测试："><a href="#对策略进行测试：" class="headerlink" title="对策略进行测试："></a>对策略进行测试：</h5><p>使用 <strong>Content-Security-Policy-Report-Only</strong> HTTP 标头来指定策略，如下：</p>
<pre><code class="highlight plaintext">Content-Security-Policy-Report-Only: policy</code></pre>

<p>附：</p>
<blockquote>
<p>如果 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only"><code>Content-Security-Policy-Report-Only</code></a> 标头和 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy"><code>Content-Security-Policy</code></a> 同时出现在一个响应中，两个策略均有效。在 <code>Content-Security-Policy</code> 标头中指定的策略有强制性，而 <code>Content-Security-Policy-Report-Only</code> 中的策略仅产生报告而不具有强制性。</p>
</blockquote>
<h5 id="启用报告："><a href="#启用报告：" class="headerlink" title="启用报告："></a>启用报告：</h5><p>默认情况下不发送报告，需要指定<strong>report-to</strong>策略指令，并提供至少一个URI地址以递交报告，如下：</p>
<pre><code class="highlight plaintext">Content-Security-Policy: default-src 'self'; report-uri http://reportcollector.example.com/collector.cgi</code></pre>

<p>然后需要设置服务器能够接收报告；使其能够以恰当的方式存储并处理这些报告。</p>
<h5 id="违规报告的语法："><a href="#违规报告的语法：" class="headerlink" title="违规报告的语法："></a>违规报告的语法：</h5><h6 id="1-blocked-uri"><a href="#1-blocked-uri" class="headerlink" title="1.blocked-uri"></a>1.blocked-uri</h6><blockquote>
<p>被 CSP 阻止的资源 URI。如果被阻止的 URI 来自不同的源而非 <code>document-uri</code>，那么被阻止的资源 URI 会被删减，仅保留协议、主机和端口号。</p>
</blockquote>
<h6 id="2-disposition"><a href="#2-disposition" class="headerlink" title="2.disposition"></a>2.disposition</h6><blockquote>
<p>根据 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy-Report-Only"><code>Content-Security-Policy-Report-Only</code></a> 和 <code>Content-Security-Policy</code> 标头使用情况的不同，值为 <code>"enforce"</code> 或 <code>"report"</code>。</p>
</blockquote>
<h6 id="3-document-uri"><a href="#3-document-uri" class="headerlink" title="3.document-uri"></a>3.document-uri</h6><p>发生违规文档的URI</p>
<h6 id="4-effective-directive"><a href="#4-effective-directive" class="headerlink" title="4.effective-directive"></a>4.effective-directive</h6><blockquote>
<p>导致违规行为发生的指令。一些浏览器可能提供不同的值，例如 Chrome 提供 <code>style-src-elem</code> 或 <code>style-src-attr</code>，即使实际执行的指令是 <code>style-src</code>。</p>
</blockquote>
<h6 id="5-original-policy"><a href="#5-original-policy" class="headerlink" title="5.original-policy"></a>5.original-policy</h6><p>由 <strong>Content-Security-Policy</strong> HTTP 标头指定的原始策略值。</p>
<h6 id="6-referer"><a href="#6-referer" class="headerlink" title="6.referer"></a>6.referer</h6><p>违规发生的地址</p>
<h6 id="7-script-sample"><a href="#7-script-sample" class="headerlink" title="7.script-sample"></a>7.script-sample</h6><blockquote>
<p>导致该违规的内联代码、事件处理器或样式的前 40 个字符。只适用于 <code>script-src*</code> 或 <code>style-src*</code> 包含 <code>'report-sample'</code> 的情况。</p>
</blockquote>
<h6 id="8-status-code"><a href="#8-status-code" class="headerlink" title="8.status-code"></a>8.status-code</h6><p>全局对象被实例化的资源的 HTTP 状态代码。</p>
<h6 id="9-violated-directive"><a href="#9-violated-directive" class="headerlink" title="9.violated-directive"></a>9.violated-directive</h6><blockquote>
<p>导致违反策略的指令。<code>violated-directive</code> 是 <code>effective-directive</code> 字段的历史名称，并包含相同的值。</p>
</blockquote>
<h5 id="违规报告的样本："><a href="#违规报告的样本：" class="headerlink" title="违规报告的样本："></a>违规报告的样本：</h5><p>页面位于<a href="http://example.com/signup.html%EF%BC%8C%E5%81%87%E8%AE%BE%E6%9C%89%E5%A6%82%E4%B8%8B%E7%AD%96%E7%95%A5%EF%BC%9A">http://example.com/signup.html，假设有如下策略：</a></p>
<pre><code class="highlight plaintext">Content-Security-Policy: default-src 'none'; style-src cdn.example.com; report-uri /_/csp-reports</code></pre>

<p>在样本HTML文档中：</p>
<pre><code class="highlight plaintext">&lt;link rel="stylesheet" href="css/style.css" /&gt;</code></pre>

<blockquote>
<p>这里仅允许加载自 <code>cdn.example.com</code> 的样式表，然而该页面企图从自己的源（<code>http://example.com</code>）加载。当该文档被访问时，一个兼容 CSP 的浏览器将以 POST 请求的形式发送违规报告到 <code>http://example.com/_/csp-reports</code>，内容如下：</p>
</blockquote>
<pre><code class="highlight json"><span class="punctuation">{</span>
  <span class="attr">"csp-report"</span><span class="punctuation">:</span> <span class="punctuation">{</span>
    <span class="attr">"blocked-uri"</span><span class="punctuation">:</span> <span class="string">"http://example.com/css/style.css"</span><span class="punctuation">,</span>
    <span class="attr">"disposition"</span><span class="punctuation">:</span> <span class="string">"report"</span><span class="punctuation">,</span>
    <span class="attr">"document-uri"</span><span class="punctuation">:</span> <span class="string">"http://example.com/signup.html"</span><span class="punctuation">,</span>
    <span class="attr">"effective-directive"</span><span class="punctuation">:</span> <span class="string">"style-src-elem"</span><span class="punctuation">,</span>
    <span class="attr">"original-policy"</span><span class="punctuation">:</span> <span class="string">"default-src 'none'; style-src cdn.example.com; report-to /_/csp-reports"</span><span class="punctuation">,</span>
    <span class="attr">"referrer"</span><span class="punctuation">:</span> <span class="string">""</span><span class="punctuation">,</span>
    <span class="attr">"status-code"</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span>
    <span class="attr">"violated-directive"</span><span class="punctuation">:</span> <span class="string">"style-src-elem"</span>
  <span class="punctuation">}</span>
<span class="punctuation">}</span></code></pre>

<hr>
<h1 id=""><a href="#" class="headerlink" title=""></a></h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">pax</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2024/03/18/HTTP%E5%85%A5%E9%97%A8/">http://example.com/2024/03/18/HTTP%E5%85%A5%E9%97%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">paxの庭院</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%85%A5%E9%97%A8/">入门</a></div><div class="post_share"><div class="social-share" data-image="/img/q2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer=""></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/2024/03/18/HTML%E5%85%A5%E9%97%A8/" title="HTML入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">HTML入门</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/05/18/Gopher%E5%85%A5%E9%97%A8/" title="Gopher入门"><img class="cover" src="/img/avatar.png" data-original="/img/q1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-18</div><div class="title">Gopher入门</div></div></a></div><div><a href="/2024/03/18/HTML%E5%85%A5%E9%97%A8/" title="HTML入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-18</div><div class="title">HTML入门</div></div></a></div><div><a href="/2024/03/18/JavaScipt%E5%85%A5%E9%97%A8/" title="JavaScipt入门"><img class="cover" src="/img/avatar.png" data-original="/img/q3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-18</div><div class="title">JavaScipt入门</div></div></a></div><div><a href="/2024/03/18/Linux-%E5%85%A5%E9%97%A8/" title="Linux 入门"><img class="cover" src="/img/avatar.png" data-original="/img/q4.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-18</div><div class="title">Linux 入门</div></div></a></div><div><a href="/2024/03/18/MYSQL%E5%85%A5%E9%97%A8/" title="MYSQL入门"><img class="cover" src="/img/avatar.png" data-original="/img/77.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-18</div><div class="title">MYSQL入门</div></div></a></div><div><a href="/2024/03/18/PHP-message-board/" title="PHP message board"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-18</div><div class="title">PHP message board</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Valine</span><span id="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" data-original="/img/77.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"></div><div class="author-info__name">pax</div><div class="author-info__description">最困难处最进步</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">18</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">13</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget" id="card-poem"><div id="poem_sentence"></div><div id="poem_info"><div id="poem_dynasty"></div><div id="poem_author"></div></div></div><script src="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/jinrishici.js" charset="utf-8"></script><script type="text/javascript">jinrishici.load(function(result) {
var sentence = document.querySelector("#poem_sentence")
var author = document.querySelector("#poem_author")
var dynasty = document.querySelector("#poem_dynasty")

var sentenceText = result.data.content
sentenceText = sentenceText.substr(0, sentenceText.length - 1);
sentence.innerHTML = sentenceText
dynasty.innerHTML = result.data.origin.dynasty
author.innerHTML = result.data.origin.author + '《' + result.data.origin.title + '》'
});</script><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#HTTP%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">HTTP入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E5%92%8CURI"><span class="toc-number">1.1.</span> <span class="toc-text">资源和URI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#URI"><span class="toc-number">1.1.1.</span> <span class="toc-text">URI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-protocol-%E6%96%B9%E6%A1%88%E6%88%96%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.1.1.1.</span> <span class="toc-text">1.protocol(方案或协议)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%BB%E6%9C%BA"><span class="toc-number">1.1.1.2.</span> <span class="toc-text">2.主机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%AB%AF%E5%8F%A3-port"><span class="toc-number">1.1.1.3.</span> <span class="toc-text">3.端口(port)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%B7%AF%E5%BE%84-path"><span class="toc-number">1.1.1.4.</span> <span class="toc-text">4.路径(path)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9F%A5%E8%AF%A2-%E5%8F%82%E6%95%B0"><span class="toc-number">1.1.1.5.</span> <span class="toc-text">5.查询(参数)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%89%87%E6%AE%B5"><span class="toc-number">1.1.1.6.</span> <span class="toc-text">6.片段</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URN"><span class="toc-number">1.1.2.</span> <span class="toc-text">URN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-URL"><span class="toc-number">1.1.3.</span> <span class="toc-text">Data URL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%85%A0-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">Ⅰ. 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%85%A1-%E5%AF%B9%E6%95%B0%E6%8D%AEbase64%E7%BC%96%E7%A0%81"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">Ⅱ.对数据base64编码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIME-%E7%B1%BB%E5%9E%8B%EF%BC%88IANA-%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B%EF%BC%89"><span class="toc-number">1.1.4.</span> <span class="toc-text">MIME 类型（IANA 媒体类型）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MIME%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">MIME结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9Web%E5%BC%80%E5%8F%91%E8%80%85%E8%87%B3%E5%85%B3%E9%87%8D%E8%A6%81%E7%9A%84MIME%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.4.3.</span> <span class="toc-text">对Web开发者至关重要的MIME类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E8%AE%BE%E7%BD%AEMIME%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.4.4.</span> <span class="toc-text">正确设置MIME类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MIME%E5%97%85%E6%8E%A2"><span class="toc-number">1.1.4.5.</span> <span class="toc-text">MIME嗅探</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%BC%A0%E9%80%81%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.4.6.</span> <span class="toc-text">其他传送文件类型的方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E6%8C%87%E5%8D%97"><span class="toc-number">1.2.</span> <span class="toc-text">HTTP指南</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">HTTP概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EHTTP%E7%9A%84%E7%BB%84%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">基于HTTP的组件系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%80%A7%E8%B4%A8"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">HTTP的基本性质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E6%8A%A5%E6%96%87"><span class="toc-number">1.2.1.3.</span> <span class="toc-text">HTTP报文</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E6%A0%87%E5%A4%B4-header"><span class="toc-number">1.2.2.</span> <span class="toc-text">HTTP标头(header)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">请求头</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.2.2.1.1.</span> <span class="toc-text">分类：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%AF%B7%E6%B1%82%E5%A4%B4%EF%BC%9A"><span class="toc-number">1.2.2.1.2.</span> <span class="toc-text">常用请求头：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-Accept"><span class="toc-number">1.2.2.1.2.1.</span> <span class="toc-text">1.Accept</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-Accept-Encoding"><span class="toc-number">1.2.2.1.2.2.</span> <span class="toc-text">2.Accept-Encoding</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-Accept-Language"><span class="toc-number">1.2.2.1.2.3.</span> <span class="toc-text">3.Accept-Language</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-Connecction"><span class="toc-number">1.2.2.1.2.4.</span> <span class="toc-text">4.Connecction</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-Host-%E5%BF%85%E9%A1%BB%E7%9A%84"><span class="toc-number">1.2.2.1.2.5.</span> <span class="toc-text">5.Host(必须的)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-Referer"><span class="toc-number">1.2.2.1.2.6.</span> <span class="toc-text">6.Referer</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-User-Agent"><span class="toc-number">1.2.2.1.2.7.</span> <span class="toc-text">7.User-Agent</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-Cache-Control"><span class="toc-number">1.2.2.1.2.8.</span> <span class="toc-text">8.Cache-Control</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-Cookie"><span class="toc-number">1.2.2.1.2.9.</span> <span class="toc-text">9.Cookie</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-Range%EF%BC%88%E7%94%A8%E4%BA%8E%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%EF%BC%89"><span class="toc-number">1.2.2.1.2.10.</span> <span class="toc-text">10.Range（用于断点续传）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#11-X-Forwarded-For"><span class="toc-number">1.2.2.1.2.11.</span> <span class="toc-text">11.X-Forwarded-For</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%A7%88"><span class="toc-number">1.2.2.1.3.</span> <span class="toc-text">概览</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%B4"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">响应头</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%EF%BC%9A-1"><span class="toc-number">1.2.2.2.1.</span> <span class="toc-text">分类：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E5%93%8D%E5%BA%94%E5%A4%B4%EF%BC%9A"><span class="toc-number">1.2.2.2.2.</span> <span class="toc-text">常见响应头：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-Cache-Control"><span class="toc-number">1.2.2.2.2.1.</span> <span class="toc-text">1.Cache-Control</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-Content-Type"><span class="toc-number">1.2.2.2.2.2.</span> <span class="toc-text">2..Content-Type</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-Content-Encoding"><span class="toc-number">1.2.2.2.2.3.</span> <span class="toc-text">3.Content-Encoding</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-Date"><span class="toc-number">1.2.2.2.2.4.</span> <span class="toc-text">4.Date</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-Server"><span class="toc-number">1.2.2.2.2.5.</span> <span class="toc-text">5.Server</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-Transfer-Encoding"><span class="toc-number">1.2.2.2.2.6.</span> <span class="toc-text">6.Transfer-Encoding</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-Expires"><span class="toc-number">1.2.2.2.2.7.</span> <span class="toc-text">7.Expires</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-Last-Modified"><span class="toc-number">1.2.2.2.2.8.</span> <span class="toc-text">8.Last-Modified</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-Connection"><span class="toc-number">1.2.2.2.2.9.</span> <span class="toc-text">9.Connection</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-Etag"><span class="toc-number">1.2.2.2.2.10.</span> <span class="toc-text">10.Etag</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#11-Refresh"><span class="toc-number">1.2.2.2.2.11.</span> <span class="toc-text">11.Refresh</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#12-Access-Control-Allow-Origin"><span class="toc-number">1.2.2.2.2.12.</span> <span class="toc-text">12.Access-Control-Allow-Origin</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#13-Access-Control-Allow-Methods"><span class="toc-number">1.2.2.2.2.13.</span> <span class="toc-text">13.Access-Control-Allow-Methods</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#14-Access-Control-Allow-Credentials"><span class="toc-number">1.2.2.2.2.14.</span> <span class="toc-text">14.Access-Control-Allow-Credentials</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#15-Content-Range"><span class="toc-number">1.2.2.2.2.15.</span> <span class="toc-text">15.Content-Range</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%A7%88-1"><span class="toc-number">1.2.2.2.3.</span> <span class="toc-text">概览</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E4%BC%9A%E8%AF%9D%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">HTTP会话过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP-1-x-%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.4.</span> <span class="toc-text">HTTP/1.x 的连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%85%A0-%E7%9F%AD%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">Ⅰ.短连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%85%A1-%E9%95%BF%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">Ⅱ.长连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%85%A2-%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">Ⅲ.流水线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%85%A3-%E5%9F%9F%E5%90%8D%E5%88%86%E5%9D%97"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">Ⅳ.域名分块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E5%8D%8F%E8%AE%AE%E5%8D%87%E7%BA%A7"><span class="toc-number">1.2.5.</span> <span class="toc-text">HTTP协议升级</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E5%AE%89%E5%85%A8"><span class="toc-number">1.3.</span> <span class="toc-text">HTTP安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%AE%89%E5%85%A8%E7%AD%96%E7%95%A5-CSP"><span class="toc-number">1.3.1.</span> <span class="toc-text">内容安全策略(CSP)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E7%BC%93%E8%A7%A3%E7%9A%84%E5%A8%81%E8%83%81"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">可缓解的威胁</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8CSP"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">使用CSP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%B6%E5%AE%9A%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">1.3.1.3.1.</span> <span class="toc-text">制定策略：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">1.3.1.3.2.</span> <span class="toc-text">编写策略：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E7%AD%96%E7%95%A5%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%EF%BC%9A"><span class="toc-number">1.3.1.3.3.</span> <span class="toc-text">对策略进行测试：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E6%8A%A5%E5%91%8A%EF%BC%9A"><span class="toc-number">1.3.1.3.4.</span> <span class="toc-text">启用报告：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9D%E8%A7%84%E6%8A%A5%E5%91%8A%E7%9A%84%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">1.3.1.3.5.</span> <span class="toc-text">违规报告的语法：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-blocked-uri"><span class="toc-number">1.3.1.3.5.1.</span> <span class="toc-text">1.blocked-uri</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-disposition"><span class="toc-number">1.3.1.3.5.2.</span> <span class="toc-text">2.disposition</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-document-uri"><span class="toc-number">1.3.1.3.5.3.</span> <span class="toc-text">3.document-uri</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-effective-directive"><span class="toc-number">1.3.1.3.5.4.</span> <span class="toc-text">4.effective-directive</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5-original-policy"><span class="toc-number">1.3.1.3.5.5.</span> <span class="toc-text">5.original-policy</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-referer"><span class="toc-number">1.3.1.3.5.6.</span> <span class="toc-text">6.referer</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7-script-sample"><span class="toc-number">1.3.1.3.5.7.</span> <span class="toc-text">7.script-sample</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-status-code"><span class="toc-number">1.3.1.3.5.8.</span> <span class="toc-text">8.status-code</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-violated-directive"><span class="toc-number">1.3.1.3.5.9.</span> <span class="toc-text">9.violated-directive</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9D%E8%A7%84%E6%8A%A5%E5%91%8A%E7%9A%84%E6%A0%B7%E6%9C%AC%EF%BC%9A"><span class="toc-number">1.3.1.3.6.</span> <span class="toc-text">违规报告的样本：</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text"></span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2020 - 2024 By pax</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.14.0-b3"></script><script src="/js/main.js?v=4.14.0-b3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = (ele) => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from(ele).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return
    
    codeMermaidEle.forEach(ele => {
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.innerHTML = `<pre class="mermaid-src" hidden>${ele.textContent}</pre>`
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js').then(runMermaidFn)
  }
  
  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '',
      appKey: '',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await btf.getScript('https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><script>(() => {
  const disqus_config = function () {
    this.page.url = 'http://example.com/2024/03/18/HTTP%E5%85%A5%E9%97%A8/'
    this.page.identifier = '/2024/03/18/HTTP%E5%85%A5%E9%97%A8/'
    this.page.title = 'HTTP入门'
  }

  const disqusReset = () => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  btf.addGlobalFn('themeChange', disqusReset, 'disqus')

  const loadDisqus = () =>{
    if (window.DISQUS) disqusReset()
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if ('Valine' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script src="/js/sakura.js"></script><script defer="" src="https://cdn.jsdelivr.net/gh/CodeByZach/pace/pace.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zindex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="立春,雨水,惊蛰,春分,清明,谷雨,立夏,小满,芒种,夏至,小暑,大暑,立秋,处暑,白露,秋分,寒露,霜降,立冬,小雪,大雪,冬至,小寒,大寒" data-fontsize="15px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const loadMeting = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'loadMeting')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

const triggerPjaxFn = (val) => {
  if (!val) return
  Object.values(val).forEach(fn => { fn() })
}

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  triggerPjaxFn(window.globalFn.pjaxSend)
})

document.addEventListener('pjax:complete', () => {
  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  triggerPjaxFn(window.globalFn.pjaxComplete)
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.14.0-b3"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,d=o();function o(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=o());for(var e,i=0;i<d.length;i++)0<=(e=(e=d[i]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,a,n,o=d[i];e=function(){d=d.filter(function(t){return o!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(o)},(t=o).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,n=t.getAttribute("data-original"),a.onload=function(){t.src=n,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=n},t.src!==n&&(a.src=n)))}()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)}(this);</script></body></html>